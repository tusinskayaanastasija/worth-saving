<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Стоит ли спасать этот народ?</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto+Mono:wght@300;400;500&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background: 
                radial-gradient(circle at 20% 50%, rgba(26, 26, 46, 0.9) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(22, 33, 62, 0.7) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(15, 52, 96, 0.8) 0%, transparent 50%),
                linear-gradient(135deg, 
                    #0a0a0a 0%, 
                    #1a1a2e 25%, 
                    #16213e 50%, 
                    #0f3460 75%, 
                    #000000 100%);
            background-attachment: fixed;
            background-size: 200% 200%;
            color: #f0f0f0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
            animation: gradientShift 40s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 25%; }
            50% { background-position: 80% 80%; }
            75% { background-position: 20% 100%; }
            100% { background-position: 0% 0%; }
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            animation: fadeInParticles 2s ease-out forwards;
            will-change: transform;
        }

        @keyframes fadeInParticles {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .particle {
            position: absolute;
            background: rgba(254, 202, 87, 0.1);
            border-radius: 50%;
            animation: float 30s infinite linear;
            opacity: 0;
            animation-delay: calc(var(--particle-index) * 0.1s);
            will-change: transform, opacity;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translate(100vw, -100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .telegram-section {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin: 40px auto 20px;
            padding: 20px;
            z-index: 1000;
        }
        
        .telegram-title {
            font-family: 'Manrope', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #feca57;
            text-align: center;
            letter-spacing: 0.5px;
            text-shadow: 0 0 20px rgba(254, 202, 87, 0.5);
            text-transform: uppercase;
        }
        
        .telegram-buttons {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .tg-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            text-decoration: none !important;
        }
        
        .tg-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .tg-btn:hover {
            transform: scale(1.2) rotate(5deg);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
        }
        
        .tg-btn:hover::before {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .tg-btn-1 {
            background-image: url('./telegram_bg_1.jpg');
        }
        
        .tg-btn-2 {
            background-image: url('./telegram_bg_2.jpg');
        }
        
        .tg-btn-3 {
            background-image: url('./telegram_bg_3.jpg');
        }
        
        .tg-btn::after {
            content: '\f2c6';
            font-family: 'Font Awesome 6 Brands';
            font-weight: 400;
            color: white;
            font-size: 28px;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.7);
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .tg-btn:hover::after {
            transform: scale(1.2) rotate(-5deg);
            color: #0088cc;
            text-shadow: 0 0 15px rgba(0, 136, 204, 0.7);
        }
        
        .container {
            max-width: 1800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 30px;
            padding: 20px;
            position: relative;
            z-index: 1;
            flex: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out;
            width: 100%;
        }
        
        .title {
            font-family: 'Manrope', sans-serif;
            font-size: 3.8rem;
            font-weight: 800;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 1.6rem;
            font-weight: 400;
            color: #aaa;
            font-style: italic;
            max-width: 800px;
            line-height: 1.6;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .calculator {
            background: rgba(30, 30, 46, 0.95);
            border-radius: 20px;
            padding: 30px 40px;
            width: 100%;
            max-width: 1800px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            animation: slideUp 1s ease-out 0.3s both;
            position: relative;
            overflow: visible;
            margin: 0 20px;
        }
        
        .formula {
            background: 
                linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px) 0 0 / 20px 20px,
                linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px) 0 0 / 20px 20px,
                rgba(20, 25, 45, 0.98);
            padding: 40px;
            border-radius: 20px;
            margin: 0px 0 60px 0;
            text-align: center;
            line-height: 1.6;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 80px rgba(254, 202, 87, 0.4),
                0 0 120px rgba(254, 202, 87, 0.2);
            transition: all 0.3s ease;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(254, 202, 87, 0.5);
            animation: formulaGlow 4s ease-in-out infinite;
            will-change: auto;
        }

        @keyframes formulaGlow {
            0% {
                box-shadow: 
                    0 15px 40px rgba(0, 0, 0, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1),
                    0 0 80px rgba(254, 202, 87, 0.4);
                border-color: rgba(254, 202, 87, 0.5);
            }
            50% {
                box-shadow: 
                    0 15px 40px rgba(0, 0, 0, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1),
                    0 0 100px rgba(254, 202, 87, 0.5);
                border-color: rgba(254, 202, 87, 0.7);
            }
            100% {
                box-shadow: 
                    0 15px 40px rgba(0, 0, 0, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1),
                    0 0 80px rgba(254, 202, 87, 0.4);
                border-color: rgba(254, 202, 87, 0.5);
            }
        }
        
        .formula-highlight {
            position: absolute;
            top: 0;
            left: -100px;
            width: 60px;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(254, 202, 87, 0.4),
                transparent
            );
            pointer-events: none;
            z-index: 2;
            transform: skewX(-15deg);
            animation: highlightMove 10s ease-in-out infinite;
            will-change: left;
        }

        @keyframes highlightMove {
            0% {
                left: -100px;
                opacity: 0.3;
            }
            10% {
                opacity: 0.7;
            }
            50% {
                left: calc(100% + 100px);
                opacity: 0.3;
            }
            51% {
                left: -100px;
                opacity: 0;
            }
            60% {
                opacity: 0.3;
            }
            100% {
                left: calc(100% + 100px);
                opacity: 0.3;
            }
        }
        
        .formula-container {
            position: relative;
            z-index: 3;
            width: 100%;
            overflow: hidden;
        }
        
        .formula .katex {
            font-size: 1.8rem !important;
            filter: drop-shadow(0 0 15px rgba(254, 202, 87, 0.4));
        }
        
        .formula .katex-display {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .formula .katex .mord {
            color: #ffffff;
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        
        .formula .katex .mtext {
            color: #feca57;
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 15px rgba(254, 202, 87, 0.5);
        }
        
        .formula .katex .mbin {
            color: #feca57;
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 12px rgba(254, 202, 87, 0.5);
        }
        
        .formula .katex .msqrt {
            color: #feca57;
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 12px rgba(254, 202, 87, 0.5);
        }
        
        .formula-description {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            color: #ccc;
            margin-top: 20px;
            font-style: italic;
            text-align: center;
            max-width: 800px;
            position: relative;
            z-index: 3;
        }

        .warning-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            font-family: 'Inter', sans-serif;
        }

        .warning-alert.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .success-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            font-family: 'Inter', sans-serif;
        }

        .success-alert.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .warning-alert i {
            font-size: 1.4rem;
            color: #feca57;
        }

        .success-alert i {
            font-size: 1.4rem;
            color: #feca57;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(0); }
            25% { transform: translateX(-50%) translateY(0) rotate(-2deg); }
            75% { transform: translateX(-50%) translateY(0) rotate(2deg); }
        }

        .warning-alert.show.shake {
            animation: shake 0.5s ease;
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; transform: translateX(-50%) translateY(-100px); }
        }
        
        .param-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 25px;
            margin-bottom: 80px;
            align-items: stretch;
        }
        
        .param {
            background: linear-gradient(145deg, 
                rgba(30, 30, 45, 0.95) 0%, 
                rgba(50, 50, 70, 0.9) 50%, 
                rgba(30, 30, 45, 0.95) 100%);
            border-radius: 18px;
            padding: 30px;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 380px;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 12px 30px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            will-change: transform, box-shadow;
        }
        
        .param:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                0 0 30px rgba(254, 202, 87, 0.2);
            border-color: rgba(254, 202, 87, 0.3);
        }
        
        .param::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                #ff6b6b 0%,
                #feca57 33%,
                #48dbfb 66%,
                #ff9ff3 100%);
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }
        
        .param:hover::before {
            opacity: 1;
            animation: gradientFlow 2s linear infinite;
        }
        
        @keyframes gradientFlow {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }
        
        .param-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }
        
        .param-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-shrink: 0;
        }
        
        .param-name {
            font-family: 'Manrope', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: #f0f0f0;
            flex: 1;
            letter-spacing: 0.3px;
        }
        
        .param-weight {
            font-family: 'Roboto Mono', monospace;
            font-size: 0.85rem;
            color: #feca57;
            background: rgba(254, 202, 87, 0.15);
            padding: 3px 10px;
            border-radius: 10px;
            border: 1px solid rgba(254, 202, 87, 0.3);
            margin-left: 10px;
            white-space: nowrap;
        }
        
        .param-controls {
            display: flex;
            gap: 20px;
            align-items: flex-end;
            flex-shrink: 0;
        }
        
        .input-with-arrows {
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 100%;
        }
        
        .input-label-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .input-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: #aaa;
            font-style: italic;
            text-align: left;
        }
        
        .input-arrow-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .input-arrow-group .number-input {
            width: 120px;
            height: 38px;
            padding: 8px 12px;
            text-align: center;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            -moz-appearance: textfield;
            appearance: textfield;
            font-family: 'Roboto Mono', monospace;
        }
        
        .input-arrow-group .number-input::-webkit-outer-spin-button,
        .input-arrow-group .number-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .input-arrow-group .input-arrows {
            display: flex;
            flex-direction: column;
            gap: 1px;
        }
        
        .input-arrow-group .arrow-btn {
            width: 22px;
            height: 16px;
            background: rgba(72, 219, 251, 0.15) !important;
            border: none !important;
            color: #48dbfb;
            cursor: pointer;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: all 0.2s ease;
            border-radius: 3px;
            font-family: 'Inter', sans-serif;
        }
        
        .input-arrow-group .arrow-btn:hover {
            background: rgba(72, 219, 251, 0.3) !important;
            transform: scale(1.15);
            color: white;
        }
        
        .arrow-up {
            border-radius: 3px 3px 0 0;
        }
        
        .arrow-down {
            border-radius: 0 0 3px 3px;
        }
        
        .input-arrow-group .number-input:focus {
            outline: none;
            border-color: #48dbfb;
            box-shadow: 0 0 0 2px rgba(72, 219, 251, 0.2);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 25px 0 30px 0;
            flex-shrink: 0;
        }
        
        .slider {
            flex-grow: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .slider.active {
            background: rgba(72, 219, 251, 0.2);
            box-shadow: 0 0 10px rgba(72, 219, 251, 0.2);
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #48dbfb, #0066ff);
            cursor: pointer;
            box-shadow: 
                0 0 0 1.5px rgba(255, 255, 255, 0.9),
                0 2px 6px rgba(0, 0, 0, 0.4),
                0 0 15px rgba(72, 219, 251, 0.5);
            transition: all 0.2s ease;
            border: none;
        }
        
        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #48dbfb, #0066ff);
            cursor: pointer;
            box-shadow: 
                0 0 0 1.5px rgba(255, 255, 255, 0.9),
                0 2px 6px rgba(0, 0, 0, 0.4),
                0 0 15px rgba(72, 219, 251, 0.5);
            transition: all 0.2s ease;
            border: none;
        }
        
        .slider::-webkit-slider-thumb:hover,
        .slider::-webkit-slider-thumb:active {
            transform: scale(1.3);
            background: linear-gradient(135deg, #ff6b6b, #ff0000);
            box-shadow: 
                0 0 0 2px rgba(255, 255, 255, 1),
                0 3px 8px rgba(0, 0, 0, 0.5),
                0 0 20px rgba(255, 107, 107, 0.6);
        }
        
        .slider::-moz-range-thumb:hover,
        .slider::-moz-range-thumb:active {
            transform: scale(1.3);
            background: linear-gradient(135deg, #ff6b6b, #ff0000);
            box-shadow: 
                0 0 0 2px rgba(255, 255, 255, 1),
                0 3px 8px rgba(0, 0, 0, 0.5),
                0 0 20px rgba(255, 107, 107, 0.6);
        }
        
        .scale-container {
            width: calc(100% - 80px);
            margin: 20px auto 0;
            padding: 40px 0;
            position: relative;
        }
        
        .scale {
            width: 100%;
            height: 30px;
            position: relative;
            margin-bottom: 60px;
        }
        
        .scale-line {
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, 
                #c0392b 0%,
                #e74c3c 10%,
                #e67e22 30%,
                #f1c40f 50%,
                #2ecc71 70%,
                #27ae60 90%,
                #27ae60 100%
            );
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .scale-ticks {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30px;
        }
        
        .tick {
            position: absolute;
            bottom: 0;
            width: 2px;
            background: rgba(255, 255, 255, 0.7);
            transform: translateX(-50%);
        }
        
        .tick.major {
            height: 25px;
        }
        
        .tick.minor {
            height: 10px;
        }
        
        .scale-markers {
            position: absolute;
            top: 40px;
            left: 0;
            right: 0;
            height: 50px;
        }
        
        .marker {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1.5rem;
            width: 40px;
            transform: translateX(-50%);
        }
        
        .marker-value {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 5px;
        }
        
        .indicator {
            position: absolute;
            top: -70px;
            transform: translateX(-50%);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
            will-change: left;
        }
        
        .indicator-label {
            font-family: 'Manrope', sans-serif;
            margin-bottom: 10px;
            font-size: 1.4rem;
            font-weight: bold;
            white-space: nowrap;
            transition: all 0.8s ease;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
            padding: 8px 20px;
            border-radius: 25px;
            background: rgba(10, 10, 20, 0.85);
            backdrop-filter: blur(15px);
            min-width: 140px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
            height: 48px;
        }
        
        .triangle {
            font-size: 32px;
            line-height: 1;
            color: #ff6b6b;
            filter: drop-shadow(0 5px 10px rgba(255, 107, 107, 0.5));
            transition: all 0.8s ease;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
        
        .interpretation {
            font-family: 'Manrope', sans-serif;
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            padding: 25px;
            border-radius: 18px;
            margin-top: 40px;
            transition: all 0.8s ease;
            min-height: 110px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(20, 20, 35, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .interpretation.good {
            background: linear-gradient(135deg, 
                rgba(46, 204, 113, 0.2) 0%, 
                rgba(46, 204, 113, 0.35) 100%);
            color: #2ecc71;
            border-color: rgba(46, 204, 113, 0.5);
            box-shadow: 
                0 10px 30px rgba(46, 204, 113, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .interpretation.ok {
            background: linear-gradient(135deg, 
                rgba(241, 196, 15, 0.2) 0%, 
                rgba(241, 196, 15, 0.35) 100%);
            color: #f1c40f;
            border-color: rgba(241, 196, 15, 0.5);
            box-shadow: 
                0 10px 30px rgba(241, 196, 15, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .interpretation.bad {
            background: linear-gradient(135deg, 
                rgba(231, 76, 60, 0.2) 0%, 
                rgba(231, 76, 60, 0.35) 100%);
            color: #e74c3c;
            border-color: rgba(231, 76, 60, 0.5);
            box-shadow: 
                0 10px 30px rgba(231, 76, 60, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .download-link {
            margin-top: 40px;
            text-align: center;
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }
        
        .download-btn, .copy-result-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, 
                rgba(72, 219, 251, 0.25) 0%, 
                rgba(72, 219, 251, 0.45) 100%);
            color: #48dbfb;
            padding: 18px 35px;
            border-radius: 35px;
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(72, 219, 251, 0.4);
            min-width: 280px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            font-family: 'Manrope', sans-serif;
            font-weight: 500;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .download-btn::before, .copy-result-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0s ease;
            z-index: -1;
            pointer-events: none;
        }
        
        .download-btn:hover::before, .copy-result-btn:hover::before {
            left: 100%;
            transition: left 0.5s ease;
        }
        
        .download-btn:not(:hover)::before, .copy-result-btn:not(:hover)::before {
            transition: left 0s ease !important;
            left: -100%;
        }
        
        .download-btn:hover, .copy-result-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(72, 219, 251, 0.4);
            border-color: rgba(72, 219, 251, 0.6);
        }
        
        .copy-result-btn {
            background: linear-gradient(135deg, 
                rgba(46, 204, 113, 0.25) 0%, 
                rgba(46, 204, 113, 0.45) 100%);
            color: #2ecc71;
            border: 1px solid rgba(46, 204, 113, 0.4);
            cursor: pointer;
        }
        
        .copy-result-btn:hover {
            box-shadow: 0 15px 35px rgba(46, 204, 113, 0.4);
            border-color: rgba(46, 204, 113, 0.6);
        }
        
        .param-description {
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            color: #bbb;
            line-height: 1.6;
            font-style: italic;
            margin-top: 0;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.12);
            overflow-y: auto;
            max-height: 180px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(50px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 1800px) {
            .param-container {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .calculator {
                max-width: 1600px;
            }
        }
        
        @media (max-width: 1400px) {
            .param-container {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .calculator {
                max-width: 1400px;
                padding: 30px 35px;
            }
            
            .telegram-section {
                max-width: 1000px;
            }
            
            .tg-btn {
                width: 65px;
                height: 65px;
            }
            
            .param {
                min-height: 360px;
            }
            
            .param-description {
                max-height: 160px;
            }
        }
        
        @media (max-width: 1100px) {
            .param-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .title {
                font-size: 3.2rem;
            }
            
            .subtitle {
                font-size: 1.4rem;
                padding: 0 15px;
            }
            
            .telegram-title {
                font-size: 1.5rem;
            }
            
            .formula .katex {
                font-size: 1.5rem !important;
            }
            
            .telegram-section {
                gap: 12px;
                padding: 15px;
            }
            
            .tg-btn {
                width: 60px;
                height: 60px;
            }
            
            .calculator {
                padding: 25px 30px;
                margin: 0 15px;
            }
            
            .param {
                padding: 25px;
                min-height: 340px;
            }
            
            .download-btn, .copy-result-btn {
                min-width: 240px;
                padding: 16px 30px;
            }
            
            .scale-container {
                width: calc(100% - 60px);
            }
            
            .param-description {
                max-height: 150px;
            }
        }
        
        @media (max-width: 768px) {
            .param-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .calculator {
                padding: 20px 25px;
                margin: 10px;
                border-radius: 15px;
                max-width: 100%;
            }
            
            .interpretation {
                font-size: 1.6rem;
                padding: 20px;
                min-height: 90px;
                margin-top: 30px;
            }
            
            .formula {
                padding: 25px;
                margin: 20px 0 40px 0;
            }
            
            .formula .katex {
                font-size: 1.3rem !important;
            }
            
            .indicator-label {
                font-size: 1.2rem;
                padding: 6px 16px;
                min-width: 120px;
                height: 40px;
            }
            
            .param-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
                margin-bottom: 15px;
            }
            
            .param-controls {
                width: 100%;
                flex-direction: column;
                gap: 18px;
            }
            
            .input-with-arrows {
                width: 100%;
            }
            
            .input-arrow-group {
                width: 100%;
                justify-content: space-between;
            }
            
            .input-arrow-group .number-input {
                width: 100%;
                max-width: 120px;
            }
            
            .slider-container {
                margin: 20px 0 25px 0;
            }
            
            .download-link {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }
            
            .download-btn, .copy-result-btn {
                width: 100%;
                max-width: 320px;
                min-width: unset;
                justify-content: center;
            }
            
            .telegram-section {
                gap: 10px;
                padding: 12px;
                margin: 30px auto 15px;
            }
            
            .telegram-title {
                font-size: 1.3rem;
            }
            
            .tg-btn {
                width: 55px;
                height: 55px;
            }
            
            .title {
                font-size: 2.8rem;
                padding: 0 10px;
            }
            
            .subtitle {
                font-size: 1.2rem;
                padding: 0 10px;
            }
            
            .scale-container {
                width: calc(100% - 50px);
                padding: 30px 0;
            }
            
            .slider::-webkit-slider-thumb {
                width: 16px;
                height: 16px;
            }
            
            .slider::-moz-range-thumb {
                width: 16px;
                height: 16px;
            }
            
            .param {
                padding: 25px;
                min-height: 320px;
            }
            
            .param-description {
                padding-top: 15px;
                max-height: 140px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 10px;
                gap: 25px;
            }
            
            .title {
                font-size: 2.3rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
                line-height: 1.5;
            }
            
            .calculator {
                padding: 18px 20px;
                margin: 5px;
            }
            
            .formula {
                padding: 20px;
                margin: 15px 0 30px 0;
            }
            
            .formula .katex {
                font-size: 1.1rem !important;
            }
            
            .param {
                padding: 22px;
                min-height: 300px;
            }
            
            .param-name {
                font-size: 1.1rem;
            }
            
            .input-arrow-group .number-input {
                width: 100%;
                max-width: 110px;
                height: 32px;
                font-size: 1rem;
                padding: 6px 8px;
            }
            
            .scale-container {
                width: calc(100% - 40px);
                padding: 25px 0;
            }
            
            .interpretation {
                font-size: 1.4rem;
                padding: 18px;
                min-height: 80px;
            }
            
            .download-btn, .copy-result-btn {
                padding: 15px 25px;
                font-size: 1rem;
                max-width: 100%;
                min-width: unset;
            }
            
            .param-description {
                font-size: 0.9rem;
                max-height: 130px;
                padding-top: 12px;
            }
            
            .marker {
                font-size: 1.2rem;
                width: 30px;
            }
            
            .marker-value {
                font-size: 0.7rem;
            }
            
            .telegram-section {
                gap: 8px;
                padding: 10px;
                margin: 25px auto 10px;
            }
            
            .telegram-title {
                font-size: 1.2rem;
            }
            
            .tg-btn {
                width: 50px;
                height: 50px;
            }
            
            .slider::-webkit-slider-thumb {
                width: 14px;
                height: 14px;
            }
            
            .slider::-moz-range-thumb {
                width: 14px;
                height: 14px;
            }
        }
        
        @media (max-width: 360px) {
            .title {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .formula {
                padding: 15px;
                margin: 12px 0 25px 0;
            }
            
            .formula .katex {
                font-size: 1rem !important;
            }
            
            .param {
                padding: 20px;
                min-height: 280px;
            }
            
            .input-arrow-group .number-input {
                max-width: 90px;
                font-size: 0.95rem;
                height: 30px;
            }
            
            .interpretation {
                font-size: 1.2rem;
                padding: 15px;
                min-height: 70px;
            }
            
            .download-btn, .copy-result-btn {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
            
            .telegram-section {
                gap: 6px;
                padding: 8px;
            }
            
            .telegram-title {
                font-size: 1.1rem;
            }
            
            .tg-btn {
                width: 45px;
                height: 45px;
            }
            
            .scale-container {
                width: calc(100% - 30px);
            }
            
            .slider::-webkit-slider-thumb {
                width: 12px;
                height: 12px;
            }
            
            .slider::-moz-range-thumb {
                width: 12px;
                height: 12px;
            }
            
            .param-description {
                font-size: 0.85rem;
                max-height: 120px;
            }
        }
        
        @media (max-height: 600px) and (orientation: landscape) {
            .container {
                gap: 20px;
            }
            
            .header {
                margin-bottom: 20px;
            }
            
            .param-container {
                grid-template-columns: repeat(2, 1fr);
                margin-bottom: 40px;
            }
            
            .param {
                min-height: 260px;
            }
            
            .scale-container {
                padding: 20px 0;
            }
            
            .formula .katex {
                font-size: 1.3rem !important;
            }
        }
        
        .animated-title-container {
            width: 100%;
            max-width: 900px;
            margin: 0 auto 30px;
            overflow: hidden;
            position: relative;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .animated-title-mask {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            mask-image: linear-gradient(
                to right,
                transparent 0%,
                black 15%,
                black 85%,
                transparent 100%
            );
            -webkit-mask-image: linear-gradient(
                to right,
                transparent 0%,
                black 15%,
                black 85%,
                transparent 100%
            );
        }
        
        .animated-title-track {
            display: flex;
            position: relative;
            height: 100%;
            align-items: center;
            justify-content: center;
            gap: 30px;
            animation: slideWords 6s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
            width: 100%;
            will-change: transform;
        }
        
        .title-word {
            font-family: 'Manrope', sans-serif;
            font-size: 3.8rem;
            font-weight: 800;
            letter-spacing: 1px;
            flex-shrink: 0;
            transition: all 0.5s ease;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
            white-space: nowrap;
            opacity: 0.3;
            text-transform: uppercase;
        }
        
        .title-word:nth-child(1) {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: fadeWord1 6s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
        }
        
        .title-word:nth-child(2) {
            background: linear-gradient(135deg, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            opacity: 1;
        }
        
        .title-word:nth-child(3) {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: fadeWord3 6s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
        }
        
        @keyframes slideWords {
            0%, 40% {
                transform: translateX(150px);
            }
            50%, 90% {
                transform: translateX(-150px);
            }
            100% {
                transform: translateX(150px);
            }
        }
        
        @keyframes fadeWord1 {
            0%, 40% {
                opacity: 1;
            }
            50%, 90% {
                opacity: 0.3;
            }
            100% {
                opacity: 1;
            }
        }
        
        @keyframes fadeWord3 {
            0%, 40% {
                opacity: 0.3;
            }
            50%, 90% {
                opacity: 1;
            }
            100% {
                opacity: 0.3;
            }
        }
        
        @media (max-width: 1100px) {
            .animated-title-container {
                height: 80px;
            }
            
            .title-word {
                font-size: 3rem;
            }
            
            @keyframes slideWords {
                0%, 40% {
                    transform: translateX(120px);
                }
                50%, 90% {
                    transform: translateX(-120px);
                }
                100% {
                    transform: translateX(120px);
                }
            }
        }
        
        @media (max-width: 768px) {
            .animated-title-container {
                height: 70px;
            }
            
            .title-word {
                font-size: 2.5rem;
            }
            
            @keyframes slideWords {
                0%, 40% {
                    transform: translateX(90px);
                }
                50%, 90% {
                    transform: translateX(-90px);
                }
                100% {
                    transform: translateX(90px);
                }
            }
        }
        
        @media (max-width: 480px) {
            .animated-title-container {
                height: 60px;
                margin-bottom: 20px;
            }
            
            .title-word {
                font-size: 2rem;
            }
            
            .animated-title-track {
                gap: 20px;
            }
            
            @keyframes slideWords {
                0%, 40% {
                    transform: translateX(70px);
                }
                50%, 90% {
                    transform: translateX(-70px);
                }
                100% {
                    transform: translateX(70px);
                }
            }
        }
        
        .mobile-optimized {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        input, button, a, .tg-btn {
            -webkit-tap-highlight-color: transparent;
        }
        
        @media (max-width: 768px) {
            .warning-alert, .success-alert {
                width: 90%;
                font-size: 0.9rem;
                padding: 12px 20px;
                flex-direction: column;
                text-align: center;
                gap: 8px;
                top: 10px;
            }
            
            .warning-alert i, .success-alert i {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 768px) {
            .formula .katex-display {
                display: block !important;
                overflow: auto hidden !important;
                -webkit-overflow-scrolling: touch !important;
                padding: 10px 5px !important;
            }
            
            .formula .katex {
                font-size: 1.2rem !important;
                transform: scale(0.85) !important;
                transform-origin: left center !important;
                max-width: 100% !important;
                display: inline-block !important;
                white-space: nowrap !important;
            }
            
            .formula-container {
                overflow: hidden !important;
                width: 100% !important;
                position: relative !important;
            }
            
            .formula {
                min-height: 120px !important;
                padding: 20px 15px !important;
                overflow: hidden !important;
            }
            
            .formula-description {
                font-size: 0.9rem !important;
                margin-top: 10px !important;
                padding: 0 5px !important;
            }
        }
        
        @media (max-width: 480px) {
            .formula .katex {
                font-size: 1rem !important;
                transform: scale(0.75) !important;
                transform-origin: left center !important;
            }
            
            .formula {
                min-height: 110px !important;
                padding: 15px 10px !important;
            }
            
            .formula .katex-display {
                padding: 8px 3px !important;
                margin: 0 auto !important;
                text-align: center !important;
            }
        }
        
        @media (max-width: 360px) {
            .formula .katex {
                font-size: 0.9rem !important;
                transform: scale(0.7) !important;
                transform-origin: center center !important;
            }
            
            .formula {
                min-height: 100px !important;
                padding: 12px 8px !important;
            }
            
            .formula {
                animation: formulaGlow 6s ease-in-out infinite !important;
            }
            
            .formula-highlight {
                display: none !important;
            }
        }
        
        @media (max-height: 600px) and (orientation: landscape) {
            .formula .katex {
                font-size: 1rem !important;
                transform: scale(0.8) !important;
            }
            
            .formula {
                min-height: 90px !important;
                padding: 15px 10px !important;
                margin: 10px 0 40px 0 !important;
            }
        }
        
        @media (prefers-reduced-motion: reduce) {
            .formula {
                animation: none !important;
                box-shadow: 
                    0 15px 40px rgba(0, 0, 0, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1),
                    0 0 90px rgba(254, 202, 87, 0.45) !important;
                border-color: rgba(254, 202, 87, 0.6) !important;
            }
        }
    </style>
</head>
<body class="mobile-optimized">
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <div class="animated-title-container">
                <div class="animated-title-mask">
                    <div class="animated-title-track" id="animated-title-track">
                        <span class="title-word">СПАСАТЬ</span>
                        <span class="title-word">НЕЛЬЗЯ</span>
                        <span class="title-word">БРОСИТЬ</span>
                    </div>
                </div>
            </div>
            <p class="subtitle">Индекс Тусинской — Аманитовой, или WS-индекс (Worth Saving) — математическая модель оценки состояния произвольного народа. Сатирико-аналитический инструмент для измерения степени деградации общества.</p>
        </div>
        
        <div class="calculator">
            <div class="formula" id="formula">
                <div class="formula-highlight"></div>
                <div class="formula-container">
                </div>
            </div>
            
            <div class="param-container" id="params-container">
            </div>
            
            <div class="scale-container">
                <div class="scale">
                    <div class="scale-line"></div>
                    
                    <div class="scale-ticks" id="scale-ticks">
                    </div>
                    
                    <div class="indicator" id="indicator" style="left: 100%;">
                        <div class="indicator-label" id="indicator-label">WS = 1000</div>
                        <div class="triangle">▼</div>
                    </div>
                    
                    <div class="scale-markers" id="scale-markers">
                    </div>
                </div>
            </div>
            
            <div class="interpretation good" id="interpretation">
                Идеальный/почти идеальный народ
            </div>
        </div>
        
        <div class="download-link">
            <a href="Tusinskaya_Amanitova_Cherepov_Index_WS_2026.pdf" class="download-btn" download>
                <i class="fas fa-download"></i> Скачать оригинальную работу (PDF)
            </a>
            <button class="copy-result-btn" id="copy-result">
                <i class="fas fa-share-alt"></i> Поделиться результатом
            </button>
        </div>
    </div>

    <div class="telegram-section">
        <h3 class="telegram-title">Подписаться на авторов</h3>
        <div class="telegram-buttons">
            <a href="https://t.me/hatingleft_m" target="_blank" class="tg-btn tg-btn-1" title="Hating Left"></a>
            <a href="https://t.me/ebuchie_degeneraty" target="_blank" class="tg-btn tg-btn-2" title="Ebuchiе Degeneraty"></a>
            <a href="https://t.me/vstvmedia" target="_blank" class="tg-btn tg-btn-3" title="VSTV Media"></a>
        </div>
    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script>
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = window.innerWidth <= 768 ? 12 : 20;
            
            const fragment = document.createDocumentFragment();
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                particle.style.setProperty('--particle-index', i);
                
                const size = Math.random() * 2 + 1;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                
                particle.style.animationDelay = `${Math.random() * 20}s`;
                
                const duration = 20 + Math.random() * 20;
                particle.style.animationDuration = `${duration}s`;
                
                fragment.appendChild(particle);
            }
            
            particlesContainer.appendChild(fragment);
        }
        
        setTimeout(createParticles, 500);
        
        const parameters = [
            {
                id: "svo",
                name: "Проведено СВО",
                description: "Количество вторжений/оккупаций под благовидными предлогами за последние 30 лет. Показатель имперского зуда.",
                weight: 0.15,
                max: 10,
                unit: "интерв./30 лет",
                value: 0
            },
            {
                id: "goida",
                name: "Плотность гойды",
                description: "Мера политического влияния турбопатриотических сил. Шкала: 0 (политика ещё о чём-то), 1 (есть маргинальные клоуны), 2 (клоуны у руля).",
                weight: 0.10,
                max: 2,
                unit: "баллы",
                value: 0
            },
            {
                id: "imperial",
                name: "Распято мальчиков в трусиках",
                description: "Количество медийно канонизированных мучеников, используемых для обоснования текущей политики.",
                weight: 0.10,
                max: 20,
                unit: "мучеников",
                value: 0
            },
            {
                id: "flowers",
                name: "Подарено цветов омоновцам",
                description: "Ритуальные подношения цветов сотрудникам правонарушительных органов. Демонстрирует глубину стокгольмского синдрома.",
                weight: 0.05,
                max: 100,
                unit: "голов./чел-год",
                value: 0
            },
            {
                id: "comments",
                name: "Настрочено тупорылых комментов",
                description: "Скорость генерации агрессивного, безграмотного и предсказуемого бреда в комментариях националных пабликов.",
                weight: 0.05,
                max: 10000,
                unit: "комм./пост-ч",
                value: 0
            },
            {
                id: "standup",
                name: "Уплачено за шутки про трансперсон",
                description: "Средний заработок популярного стендап-комика. Высокий гонорар указывает на массовое одобрение ксенофобии.",
                weight: 0.05,
                max: 1000000,
                unit: "ед.вал./выст.",
                value: 0
            },
            {
                id: "food",
                name: "Съедено блинов с лопаты",
                description: "Оценка распространённости пищевых практик, моделирующих социальную иерархию и покорность.",
                weight: 0.15,
                max: 100,
                unit: "потребл./чел-год",
                value: 0
            },
            {
                id: "libertarian",
                name: "Расправлено плеч",
                description: "Степень увлечения идеями радикального индивидуализма и социального дарвинизма.",
                weight: 0.15,
                max: 100,
                unit: "проявл./год",
                value: 0
            },
            {
                id: "steven",
                name: "Перевоспитано Гитлеров",
                description: "Средняя оценка мультсериала Steven Universe в стране. Показатель инфантильности и тяги к примитивным моральным пазлам.",
                weight: 0.15,
                max: 10,
                unit: "баллы",
                value: 0
            },
            {
                id: "shoes",
                name: "Разуто невероятных",
                description: "Количество снятой обуви при вставании на лавочки. Свидетельствует о патологически раболепной форме протеста.",
                weight: 0.05,
                max: 1000,
                unit: "актов/год",
                value: 0
            }
        ];

        const interpretations = [
            { min: 900, max: 1000, text: "ИДЕАЛЬНЫЙ/ПОЧТИ ИДЕАЛЬНЫЙ НАРОД", className: "good" },
            { min: 700, max: 900, text: "ХОРОШИЙ НАРОД, БЕЗУСЛОВНО СТОИТ СПАСАТЬ", className: "good" },
            { min: 500, max: 700, text: "УДОВЛЕТВОРИТЕЛЬНЫЙ НАРОД, МОЖНО СПАСАТЬ ПРИ НАЛИЧИИ СЫРЬЯ И КАДРОВ", className: "ok" },
            { min: 300, max: 500, text: "ПРОБЛЕМНЫЙ НАРОД, СПАСЕНИЕ ЗАТРУДНИТЕЛЬНО, НО ВОЗМОЖНО", className: "ok" },
            { min: 100, max: 300, text: "ПЛОХОЙ НАРОД, СПАСАТЬ НЕ РЕКОМЕНДУЕТСЯ", className: "bad" },
            { min: 0, max: 100, text: "КАТАСТРОФИЧЕСКИЙ НАРОД, НЕ СТОИТ СПАСАТЬ", className: "bad" }
        ];

        const emojiPositions = [
            { value: 0, position: 0, emoji: "💀" },
            { value: 100, position: 10, emoji: "❌" },
            { value: 300, position: 30, emoji: "🚧" },
            { value: 500, position: 50, emoji: "⚠️" },
            { value: 700, position: 70, emoji: "✅" },
            { value: 900, position: 90, emoji: "✨" },
            { value: 1000, position: 100, emoji: "🌟" }
        ];

        let currentNLS = 1000;
        let lastWsValue = 1000;
        let activeSliders = new Set();
        let cachedElements = {};
        
        function getElement(id) {
            if (!cachedElements[id]) {
                cachedElements[id] = document.getElementById(id);
            }
            return cachedElements[id];
        }
        
        function logisticFunction(norm) {
            const k = 10;
            const c = 0.5;
            
            return 1 / (1 + Math.exp(k * (norm - c)));
        }

        function renderFormula() {
            const formulaElement = getElement('formula');
            const formulaContainer = formulaElement.querySelector('.formula-container');

            formulaContainer.innerHTML = '';
            
            const formula = String.raw`
                \text{WS}(P, t) = 1000 \cdot \frac{1}{1 + e^{10(\|\mathbf{x}\|_{W} - 0.5)}}, \\
                \|\mathbf{x}\|_{W} = \sqrt{\sum_{i=1}^{n} w_i \cdot x_i^2}
            `;

            const formulaWrapper = document.createElement('div');
            formulaWrapper.className = 'katex-formula-wrapper';
            formulaWrapper.style.cssText = 'width: 100%; overflow: hidden;';
            
            katex.render(formula, formulaContainer, {
                displayMode: true,
                throwOnError: false,
                fleqn: false,
                output: 'html',
                trust: true
                maxSize: window.innerWidth <= 768 ? 14 : Infinity,
                maxExpand: window.innerWidth <= 768 ? 100 : 1000
            });

            formulaContainer.appendChild(formulaWrapper);
            
            const description = document.createElement('div');
            description.className = 'formula-description';
            description.innerHTML = 'где <span style="color:#feca57; text-shadow: 0 0 10px rgba(254, 202, 87, 0.4);">w<sub>i</sub></span> — вес параметра, <span style="color:#48dbfb; text-shadow: 0 0 10px rgba(72, 219, 251, 0.4);">x<sub>i</sub></span> — нормализованное значение параметра';
            formulaElement.appendChild(description);
            adaptFormulaToScreen();
        }

        function adaptFormulaToScreen() {
            const formulaWrapper = document.querySelector('.katex-formula-wrapper');
            if (!formulaWrapper) return;
            
            const container = document.querySelector('.formula-container');
            const formula = formulaWrapper.querySelector('.katex');
            
            if (!formula || !container) return;
            
            const containerWidth = container.offsetWidth;
            const formulaWidth = formula.scrollWidth;
            
            if (formulaWidth > containerWidth && window.innerWidth <= 768) {
                const scale = Math.min(0.95, containerWidth / formulaWidth * 0.9);
                formula.style.transform = `scale(${scale})`;
                formula.style.transformOrigin = 'left center';
            }
        }

        window.addEventListener('resize', () => {
            adaptFormulaToScreen();
        });

        function createScale() {
            const ticksContainer = getElement('scale-ticks');
            const markersContainer = getElement('scale-markers');
            
            const ticksFragment = document.createDocumentFragment();
            const markersFragment = document.createDocumentFragment();
            
            for (let i = 0; i <= 100; i += 10) {
                const tick = document.createElement('div');
                
                const isMajor = emojiPositions.some(pos => pos.position === i);
                
                if (isMajor) {
                    tick.className = 'tick major';
                } else {
                    tick.className = 'tick minor';
                }
                
                tick.style.left = `${i}%`;
                ticksFragment.appendChild(tick);
            }
            
            emojiPositions.forEach(pos => {
                const marker = document.createElement('div');
                marker.className = 'marker';
                marker.style.left = `${pos.position}%`;
                marker.innerHTML = `
                    <div style="filter: drop-shadow(0 0 5px rgba(255,255,255,0.4));">${pos.emoji}</div>
                    <div class="marker-value">${pos.value}</div>
                `;
                markersFragment.appendChild(marker);
            });
            
            ticksContainer.appendChild(ticksFragment);
            markersContainer.appendChild(markersFragment);
        }

        function initParameters() {
            const container = getElement('params-container');
            
            const fragment = document.createDocumentFragment();
            
            parameters.forEach(param => {
                const paramElement = document.createElement('div');
                paramElement.className = 'param';
                paramElement.innerHTML = `
                    <div class="param-content">
                        <div class="param-header">
                            <div class="param-name">${param.name}</div>
                        </div>
                        <div class="param-controls">
                            <div class="input-with-arrows">
                                <div class="input-label-row">
                                    <div class="input-label"><i>Значение (0-${param.max})<br>${param.unit}</i></div>
                                    <div class="param-weight">вес: ${param.weight.toFixed(2)}</div>
                                </div>
                                <div class="input-arrow-group">
                                    <input type="number" min="0" max="${param.max}" value="${param.value}" 
                                           class="number-input value-input" id="input-${param.id}" 
                                           data-id="${param.id}" title="Значение параметра">
                                    <div class="input-arrows">
                                        <button type="button" class="arrow-btn arrow-up" data-for="input-${param.id}" data-step="1">▲</button>
                                        <button type="button" class="arrow-btn arrow-down" data-for="input-${param.id}" data-step="1">▼</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slider-container">
                            <input type="range" min="0" max="${param.max}" value="${param.value}" 
                                   class="slider" id="slider-${param.id}" 
                                   data-id="${param.id}">
                        </div>
                        <div class="param-description">${param.description}</div>
                    </div>
                `;
                
                fragment.appendChild(paramElement);
            });
            
            container.appendChild(fragment);
            
            container.addEventListener('input', function(e) {
                if (e.target.classList.contains('slider')) {
                    const paramId = e.target.dataset.id;
                    const input = getElement(`input-${paramId}`);
                    input.value = e.target.value;
                    updateParameter(paramId, parseFloat(e.target.value));
                    calculateWS();
                    addVibration();
                    
                    if (!e.target.classList.contains('active')) {
                        e.target.classList.add('active');
                    }
                }
                
                if (e.target.classList.contains('value-input')) {
                    const paramId = e.target.dataset.id;
                    let value = parseFloat(e.target.value);
                    const param = parameters.find(p => p.id === paramId);
                    
                    if (isNaN(value)) value = 0;
                    if (value < 0) value = 0;
                    if (value > param.max) value = param.max;
                    
                    e.target.value = value;
                    const slider = getElement(`slider-${paramId}`);
                    slider.value = value;
                    updateParameter(paramId, value);
                    calculateWS();
                    addVibration();
                }
            });
            
            container.addEventListener('change', function(e) {
                if (e.target.classList.contains('slider')) {
                    activeSliders.delete(e.target.id);
                    if (activeSliders.size === 0) {
                        e.target.classList.remove('active');
                    }
                }
            });
            
            container.addEventListener('mousedown', function(e) {
                if (e.target.classList.contains('slider')) {
                    activeSliders.add(e.target.id);
                    e.target.classList.add('active');
                }
            });
            
            container.addEventListener('touchstart', function(e) {
                if (e.target.classList.contains('slider')) {
                    activeSliders.add(e.target.id);
                    e.target.classList.add('active');
                }
            });
            
            container.addEventListener('mouseup', function(e) {
                if (e.target.classList.contains('slider')) {
                    activeSliders.delete(e.target.id);
                    if (activeSliders.size === 0) {
                        e.target.classList.remove('active');
                    }
                }
            });
            
            container.addEventListener('touchend', function(e) {
                if (e.target.classList.contains('slider')) {
                    activeSliders.delete(e.target.id);
                    if (activeSliders.size === 0) {
                        e.target.classList.remove('active');
                    }
                }
            });
            
            container.addEventListener('click', function(e) {
                const arrowBtn = e.target.closest('.arrow-btn');
                if (arrowBtn) {
                    const inputId = arrowBtn.getAttribute('data-for');
                    const step = parseFloat(arrowBtn.getAttribute('data-step'));
                    const isUp = arrowBtn.classList.contains('arrow-up');
                    const input = getElement(inputId);
                    const paramId = input.dataset.id;
                    const param = parameters.find(p => p.id === paramId);
                    
                    let currentValue = parseFloat(input.value) || 0;
                    
                    if (isUp) {
                        currentValue += step;
                        if (currentValue > param.max) currentValue = param.max;
                    } else {
                        currentValue -= step;
                        if (currentValue < 0) currentValue = 0;
                    }
                    
                    input.value = currentValue;
                    const slider = getElement(`slider-${paramId}`);
                    slider.value = currentValue;
                    updateParameter(paramId, currentValue);
                    calculateWS();
                    addVibration();
                    
                    arrowBtn.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        arrowBtn.style.transform = '';
                    }, 150);
                }
            });
            
            container.addEventListener('focus', function(e) {
                if (e.target.classList.contains('number-input') && window.innerWidth <= 768) {
                    setTimeout(() => {
                        e.target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            }, true);
        }

        function updateParameter(id, value) {
            const param = parameters.find(p => p.id === id);
            if (param) {
                param.value = value;
            }
        }
        
        let calculateWsTimeout = null;
        
        function calculateWS() {
            if (calculateWsTimeout) {
                clearTimeout(calculateWsTimeout);
            }
            
            calculateWsTimeout = setTimeout(() => {
                let weightedNorm = 0;
                
                for (let i = 0; i < parameters.length; i++) {
                    const param = parameters[i];
                    const normalizedValue = param.value / param.max;
                    weightedNorm += param.weight * Math.pow(normalizedValue, 2);
                }
                
                const norm = Math.sqrt(weightedNorm);
                
                const ws = 1000 * logisticFunction(norm);
                
                if (Math.abs(ws - lastWsValue) > 50) {
                    const indicator = getElement('indicator');
                    indicator.style.transform = `translateX(-50%) scale(1.1)`;
                    setTimeout(() => {
                        indicator.style.transform = `translateX(-50%) scale(1)`;
                    }, 300);
                }
                
                lastWsValue = ws;
                currentNLS = ws;
                
                updateIndicator(ws);
                updateInterpretation(ws);
            }, 50);
        }

        function updateIndicator(ws) {
            const indicator = getElement('indicator');
            const indicatorLabel = getElement('indicator-label');
            const triangle = document.querySelector('.triangle');
            
            let position = (ws / 1000) * 100;
            if (position < 0) position = 0;
            if (position > 100) position = 100;
            
            indicator.style.left = `${position}%`;
            indicatorLabel.textContent = `WS = ${Math.round(ws)}`;
            
            let color;
            if (position <= 10) {
                const t = position / 10;
                color = interpolateColor("#c0392b", "#e74c3c", t);
            } else if (position <= 30) {
                const t = (position - 10) / 20;
                color = interpolateColor("#e74c3c", "#e67e22", t);
            } else if (position <= 50) {
                const t = (position - 30) / 20;
                color = interpolateColor("#e67e22", "#f1c40f", t);
            } else if (position <= 70) {
                const t = (position - 50) / 20;
                color = interpolateColor("#f1c40f", "#2ecc71", t);
            } else if (position <= 90) {
                const t = (position - 70) / 20;
                color = interpolateColor("#2ecc71", "#27ae60", t);
            } else {
                color = "#27ae60";
            }
            
            triangle.style.color = color;
            indicatorLabel.style.color = color;
            indicatorLabel.style.background = `rgba(${parseInt(color.slice(1,3), 16)}, ${parseInt(color.slice(3,5), 16)}, ${parseInt(color.slice(5,7), 16)}, 0.2)`;
            
            indicatorLabel.style.transform = 'scale(1.1)';
            setTimeout(() => {
                indicatorLabel.style.transform = 'scale(1)';
            }, 200);
        }

        function interpolateColor(color1, color2, factor) {
            const hexToRgb = (hex) => {
                const r = parseInt(hex.slice(1,3), 16);
                const g = parseInt(hex.slice(3,5), 16);
                const b = parseInt(hex.slice(5,7), 16);
                return {r, g, b};
            };
            
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            
            const r = Math.round(rgb1.r + (rgb2.r - rgb1.r) * factor);
            const g = Math.round(rgb1.g + (rgb2.g - rgb1.g) * factor);
            const b = Math.round(rgb1.b + (rgb2.b - rgb1.b) * factor);
            
            return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
        }

        function updateInterpretation(ws) {
            const interpretationEl = getElement('interpretation');
            
            let interpretation = null;
            let left = 0;
            let right = interpretations.length - 1;
            
            while (left <= right) {
                const mid = Math.floor((left + right) / 2);
                const item = interpretations[mid];
                
                if (ws >= item.min && ws <= item.max) {
                    interpretation = item;
                    break;
                } else if (ws < item.min) {
                    right = mid - 1;
                } else {
                    left = mid + 1;
                }
            }
            
            if (interpretation) {
                interpretationEl.style.opacity = '0.5';
                interpretationEl.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    interpretationEl.textContent = interpretation.text;
                    interpretationEl.className = 'interpretation ' + interpretation.className;
                    interpretationEl.style.opacity = '1';
                    interpretationEl.style.transform = 'translateY(0)';
                }, 300);
            }
        }
        
        function shouldRescue(ws) {
            return ws >= 500 ? "стоит" : "не стоит";
        }

        function initRandomValues() {
            const updates = [];
            
            parameters.forEach(param => {
                const randomValue = Math.floor(Math.random() * (param.max * 0.3));
                updates.push({
                    paramId: param.id,
                    value: randomValue
                });
                param.value = randomValue;
            });
            
            updates.forEach(update => {
                const slider = getElement(`slider-${update.paramId}`);
                const input = getElement(`input-${update.paramId}`);
                
                if (slider) slider.value = update.value;
                if (input) input.value = update.value;
            });
            
            calculateWS();
        }

        function showSuccessAlert() {
            const success = getElement('success-alert');
            success.classList.remove('show');
            
            setTimeout(() => {
                success.classList.add('show');
                setTimeout(() => {
                    success.classList.remove('show');
                }, 3000);
            }, 10);
        }
        
        function encodeParameters() {
            let encodedParts = [];
            encodedParts.length = parameters.length;
            
            for (let i = 0; i < parameters.length; i++) {
                const param = parameters[i];
                const scaledValue = Math.round((param.value / param.max) * 4095);
                let encoded = encodeBase62(scaledValue);
                encodedParts[i] = encoded.length.toString(36) + encoded;
            }
            return encodedParts.join('');
        }
        
        function decodeParameters(encodedString) {
            try {
                let pos = 0;
                let paramIndex = 0;
                
                while (pos < encodedString.length && paramIndex < parameters.length) {
                    const lengthChar = encodedString[pos];
                    const partLength = parseInt(lengthChar, 36);
                    
                    if (isNaN(partLength) || partLength <= 0) {
                        throw new Error('Некорректная длина параметра');
                    }
                    
                    const part = encodedString.substr(pos + 1, partLength);
                    if (part.length !== partLength) {
                        throw new Error('Недостаточно данных для параметра');
                    }
                    
                    const scaledValue = decodeBase62(part);
                    parameters[paramIndex].value = (scaledValue / 4095) * parameters[paramIndex].max;
                    parameters[paramIndex].value = Math.round(parameters[paramIndex].value);
                    
                    pos += 1 + partLength;
                    paramIndex++;
                }
                
                if (paramIndex !== parameters.length) {
                    throw new Error('Не все параметры были декодированы');
                }
                
                return true;
            } catch (e) {
                console.error('Ошибка декодирования параметров:', e);
                return false;
            }
        }
        
        function checkUrlForParameters() {
            const hash = window.location.hash;
            if (hash && hash.startsWith('#s=')) {
                const encodedString = hash.substring(3);
                if (encodedString && decodeParameters(encodedString)) {
                    updateUIFromParameters();
                    return true;
                }
            }
            return false;
        }
        
        function updateUIFromParameters() {
            parameters.forEach((param, index) => {
                const slider = getElement(`slider-${param.id}`);
                const input = getElement(`input-${param.id}`);
                
                if (slider) slider.value = param.value;
                if (input) input.value = param.value;
            });
            
            calculateWS();
        }
        
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showSuccessAlert();
                
                const copyBtn = getElement('copy-result');
                copyBtn.style.transform = 'scale(0.95)';
                copyBtn.style.background = 'linear-gradient(135deg, rgba(46, 204, 113, 0.6), rgba(46, 204, 113, 0.8))';
                setTimeout(() => {
                    copyBtn.style.transform = '';
                    copyBtn.style.background = '';
                }, 300);
                
                return true;
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    showSuccessAlert();
                    return true;
                } catch (err) {
                    console.error('Не удалось скопировать текст: ', err);
                    return false;
                } finally {
                    document.body.removeChild(textArea);
                }
            }
        }
        
        function setupShareButton() {
            const shareButton = getElement('copy-result');
            
            shareButton.addEventListener('click', async function() {
                const ws = Math.round(currentNLS);
                const rescueStatus = shouldRescue(ws);
                const encodedString = encodeParameters();
                const shareUrl = window.location.href.split('#')[0] + `#s=${encodedString}`;
                const shareText = `WS-индекс: ${ws}! Ваш народ ${rescueStatus} спасать. ${shareUrl}`;
                
                await copyToClipboard(shareText);
            });
        }
        
        const BASE62_ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        
        function encodeBase62(num) {
            if (num === 0) return '0';
            let result = '';
            while (num > 0) {
                result = BASE62_ALPHABET[num % 62] + result;
                num = Math.floor(num / 62);
            }
            return result;
        }
        
        function decodeBase62(str) {
            let result = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str[i];
                const value = BASE62_ALPHABET.indexOf(char);
                if (value === -1) throw new Error('Недопустимый символ в base62 строке');
                result = result * 62 + value;
            }
            return result;
        }
        
        const supportsVibration = 'vibrate' in navigator;
        
        function addVibration() {
            if (supportsVibration && window.innerWidth <= 768) {
                navigator.vibrate(10);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            renderFormula();
            createScale();
            initParameters();
            
            const hasUrlParams = checkUrlForParameters();
            if (!hasUrlParams) {
                initRandomValues();
            }
            
            setupShareButton();
            
            if (window.innerWidth <= 768) {
                document.body.classList.add('mobile-optimized');
            }
            
            requestAnimationFrame(() => {
                const calculator = document.querySelector('.calculator');
                calculator.style.opacity = '1';
            });

            setTimeout(adaptFormulaToScreen, 100);
        });
    </script>

    <div class="success-alert" id="success-alert">
        <i class="fas fa-check-circle"></i>
        <span>Ссылка скопирована в буфер обмена!</span>
    </div>

</body>
</html>
